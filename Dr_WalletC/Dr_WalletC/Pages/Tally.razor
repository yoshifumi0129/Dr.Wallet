@page "/tallys"
@using Dr_WalletC.Data;
@using Dr_WalletC.Models
@using Microsoft.EntityFrameworkCore;
@inject ApplicationDbContext _context
@inject IJSRuntime JSRuntime

<PageTitle>Counter</PageTitle>
<h1>ダッシュボードテンプレートです</h1>

<SfDashboardLayout Columns="6"  AllowResizing=true>
    <DashboardLayoutPanels >
        <DashboardLayoutPanel Column="0" Row="0" SizeX="2" SizeY="1">
            <HeaderTemplate>収入</HeaderTemplate>
            <ContentTemplate>
                Content of Panel2
            </ContentTemplate>
        </DashboardLayoutPanel>
        <DashboardLayoutPanel Column="2" Row="0" SizeX="2" SizeY="1">
            <HeaderTemplate>支出</HeaderTemplate>
            <ContentTemplate>
                Content of Panel2
            </ContentTemplate>
        </DashboardLayoutPanel>
        <DashboardLayoutPanel Column="4" Row="0" SizeX="2" SizeY="1">
            <HeaderTemplate>残高</HeaderTemplate>
            <ContentTemplate>
                Content of Panel3
            </ContentTemplate>
        </DashboardLayoutPanel>
        <DashboardLayoutPanel Column="0" Row="1" SizeX="3" SizeY="3">
            <HeaderTemplate>支出の割合</HeaderTemplate>
            <ContentTemplate>
                <button class="btn btn-primary btn-sm py-0" onclick="pieChartTest(@Food,@Hobby,@Carfare,@Clothes,@Expenses,@Education)">Click me</button>
                <div class="chart-container" style="position: relative; height:400px; width:600px ">
                    <canvas id="myChart" style="text-align:center"></canvas>
                </div>
            </ContentTemplate>
        </DashboardLayoutPanel>
        <DashboardLayoutPanel Column="4" Row="1" SizeX="3" SizeY="3">
            <HeaderTemplate>カテゴリー別合計</HeaderTemplate>
            <ContentTemplate>
                Content of Panel5
            </ContentTemplate>
        </DashboardLayoutPanel>
    </DashboardLayoutPanels>
</SfDashboardLayout>


<style>
    .e-panel-header{
        text-align:center
    }
    .e-panel-content{
        text-align:center;
        margin-top:10px;
    }
</style>

@* @foreach (var item in balance)
{
    
    IncomeSUM += @item.Price;
}
 *@
@code{
    public IList<Balance> balance { get; set; }
    public int IncomeSUM{ get; set; }

    private int Food = 15;
    private int Hobby = 10;
    private int Carfare = 12;
    private int Clothes = 10;
    private int Expenses = 8;
    private int Education = 20;
    private int Water = 10;
    // protected override async Task OnInitializedAsync()
    // {
    //     IQueryable<Balance> result = _context.Balance.FromSqlRaw("SELECT \"Price\" FROM \"Balances\" WHERE \"Bop\"='支出';");
    //     balance = await result.ToListAsync();
    // }

}


